<%-include('./header/header')%>
<script src="https://cdn.ckeditor.com/4.16.1/standard-all/ckeditor.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>



<div id="main-content">
<div class="container-fluid">
<div class="block-header">
<div class="row clearfix">
<div class="col-md-6 col-sm-12">
<h1>Edit Villa</h1>
<nav aria-label="breadcrumb">
<ol class="breadcrumb">
<li class="breadcrumb-item"><a href="/view/dashboard">Dashboard</a></li>
<li class="breadcrumb-item active" aria-current="page"> Edit Villa </li>
</ol>
</nav>
</div>
<div class="col-md-6 col-sm-12 text-right hidden-xs">
</div>
</div>
</div>

<div class="row clearfix">
<div class="col-md-12">
<div class="card">
<div class="body">
<div class="row clearfix">
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Villa ID</label>
	<input type="text" name="" id="villa_id" class="form-control" readonly>
	<input type="text" name="" id="edit_villa_id" class="form-control" hidden>

</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Villa Name</label>
	<input type="text" name="" id="villa_name" class="form-control">
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Destination</label>
	<select class="form-control" id="destination">
		<option value="">Select Destination</option>
	</select>
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Permalink</label>
	<input type="text" name="" id="permlink" class="form-control">
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>No. Of Rooms</label>
	<input type="number" name="" id="no_of_rooms" class="form-control">
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>No. Of Beds</label>
	<input type="number" name="" id="no_of_beds" class="form-control">
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>No. Of Bathrooms</label>
	<input type="number" name="" id="no_of_bathrooms" class="form-control">
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>No. Of Kitchens</label>
	<input type="number" name="" id="no_of_kitchen" class="form-control">
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>No. Of Mattresses</label>
	<input type="number" id="no_of_mattresses" class="form-control">
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Standard capacity</label>
	<input type="text" name="" id="standard_capacity" class="form-control">
</div>
<!-- <div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Extra person price beyond standard capacity</label>
	<input type="text" name="" id="extra_person_price" class="form-control">
</div> -->
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Max capacity</label>
	<input type="text" name="" id="max_capacity" class="form-control">
</div>

<div class="col-lg-6 col-md-12" style="margin-top:10px;">
	<label>Sun To Fri price : </label>
<input type="text" class="form-control" id="weekday_price">
	<div class="row">
		<div class="col">
			<label>Extra Person Sun To Fri Price</label>
			<input type="text" name="" id="weekday_price_extra_adult" class="form-control">
		</div>
		
	</div>
</div>
<div class="col-lg-6 col-md-12" style="margin-top:10px;">
	<label>Saturday price : </label>
	<input type="text" class="form-control" id="weekend_price">
	<div class="row">
		<div class="col">
			<label>Extra Person Saturday Price</label>
			<input type="text" name="" id="weekend_price_extra_adult" class="form-control">
		</div>
		
	</div>
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Select Host</label>
	<select class="form-control" id="select_host">
		<option value="">select host</option>
	</select>
</div>
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Check-in Time</label>
	<input type="time" name="" id="check_in_time" class="form-control">
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Check-out Time</label>
	<input type="time" name="" id="check_out_time" class="form-control">
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Build Up Area</label>
	<input type="text" name="" id="build_up_area" class="form-control">
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
<label>Select Amenities</label>
<div class="multiselect_div">
<select id="multiselect2" name="multiselect2[]" class="multiselect multiselect-custom" multiple="multiple">
<!-- <option value="Swimming pool">Swimming pool</option>
<option value="Air conditioning">Air conditioning</option>
<option value="TV">TV</option>
<option value="Wifi">Wifi</option>
<option value="Private bathroom">Private bathroom</option>
<option value="Hot shower">Hot shower</option> -->
</select>
</div>
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Youtube Video Link</label>
	<input type="text" name="" id="youtube_video_link" class="form-control">
</div>
</div>
<!-- <div class="row">
	<div class="col" style="margin-top:10px;">
	<label>You want to add extra amenities </label> &nbsp; <sapn><button class="btn btn-default" id="add_extra_amenities">Add
	</button></sapn>
	</div>
</div>
<div class="row" id="amenitis_input" hidden>
	<div class="col-8" style="margin-top:10px;">
		<input type="text" class="form-control"  id="amenitis_input_show">
	</div>
	<div class="col-4" id="add_amenities" style="margin-top:10px;">
		<button class="btn btn-default" id="append_amenities">Add </button>
	</div>
</div> -->
<div class="row">
	
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Youtube Video Banner</label>
	<input type="file" id="youtube_video_bannner" class="form-control">
</div>
<div class="col" style="margin-top:10px;">
	<label for="street_address">Street Address<span class="text-danger">*</span></label>
	
	<input type="text" id="street_address" name="street_address" class="form-control" placeholder="Enter your address"
										onFocus="geolocate()" autocomplete="off"  required="">
										<input type="hidden" name="place_id" id="place_id">
										<input type="hidden" name="place_url" id="place_url">
										<input type="hidden" name="latitude" id="latitude">
										<input type="hidden" name="longitude" id="longitude">
	</div>
	<div class="col" style="margin-top:10px;">
		<label>Partial Payment</label>
		<select class="form-control" id="partial_payment">
			<option value="">Select Partial Payment</option>
			<option value="30%">30%</option>
			<option value="50%">50%</option>
	
		</select>
	</div>
	</div>
	<div class="row">
	
		<div class="col-lg-8 col-md-12" style="margin-top:10px;">
			<label>Villa Information Text</label>
		<textarea type="text" class="form-control" id="villa_info_text" ></textarea>
	</div>
	</div>
	<div class="row">
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Is government ID mandatory</label><br>
	<input type="radio" name="is_goverment_id" id="y_gov" value="Yes">&nbsp;Yes&nbsp;&nbsp;
	<input type="radio" name="is_goverment_id" id="n_gov" value="No">&nbsp;No&nbsp;&nbsp;
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Is smoking allowed?</label><br>
	<input type="radio" name="is_smoking" id="y_smoke" value="Yes">&nbsp;Yes&nbsp;&nbsp;
	<input type="radio" name="is_smoking" id="n_smoke" value="No">&nbsp;No&nbsp;&nbsp;
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Is drinking allowed?</label><br>
	<input type="radio" name="is_drinking" id="y_drink" value="Yes">&nbsp;Yes&nbsp;&nbsp;
	<input type="radio" name="is_drinking" id="n_drink" value="No">&nbsp;No&nbsp;&nbsp;
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Is infants allowed?</label><br>
	<input type="radio" name="is_infants" id="y_infant" value="Yes">&nbsp;Yes&nbsp;&nbsp;
	<input type="radio" name="is_infants" id="n_infant" value="No">&nbsp;No&nbsp;&nbsp;
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Is pets allowed?</label><br>
	<input type="radio" name="is_pets" id="y_pet" value="Yes">&nbsp;Yes&nbsp;&nbsp;
	<input type="radio" name="is_pets" id="n_pet" value="No">&nbsp;No&nbsp;&nbsp;
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Villa Status</label><br>
	<input type="radio" name="status" id="y_status" value="Active">&nbsp;Active&nbsp;&nbsp;
	<input type="radio" name="status" id="n_status" value="Inactive">&nbsp;Inactive&nbsp;&nbsp;
</div>

<div class="col-lg-12 col-md-12" style="margin-top:10px;">
	<label>Photos Of Villa</label>
	<input type="file" name="" id="villa_photos" class="form-control" multiple>
</div>
</div>
<div class="row">
<div class="col" style="margin-top:10px;">
	
		<label>Additional Rule</label>
		<textarea cols="80"  name="editor1editor1" id="additional_rule" rows="10"></textarea>
		  <script>
			CKEDITOR.replace('additional_rule', {
			  fullPage: true,
			  extraPlugins: 'docprops',
			  // Disable content filtering because if you use full page mode, you probably
			  // want to  freely enter any HTML content in source mode without any limitations.
			  allowedContent: true,
			  height: 320
			});
		  </script>
	
</div>
</div>
<div class="row">
	<div class="col" style="margin-top:10px;">
		
			<label>Description</label>
			<textarea cols="80"  name="editor1editor1" id="description" rows="10"></textarea>
			  <script>
				CKEDITOR.replace('description', {
				  fullPage: true,
				  extraPlugins: 'docprops',
				  // Disable content filtering because if you use full page mode, you probably
				  // want to  freely enter any HTML content in source mode without any limitations.
				  allowedContent: true,
				  height: 320
				});
			  </script>
		
	</div>
	</div>
<div class="row">
	 <div class="col-lg-12 col-md-12 col-sm-12 col-12" style="margin-top:10px;">
		<label>Nearby Places</label>
		<textarea cols="80"  name="editor1editor1" id="nearby_places" rows="10"></textarea>
		  <script>
			CKEDITOR.replace('nearby_places', {
			  fullPage: true,
			  extraPlugins: 'docprops',
			  // Disable content filtering because if you use full page mode, you probably
			  // want to  freely enter any HTML content in source mode without any limitations.
			  allowedContent: true,
			  height: 320
			});
		  </script>
	</div>
<!-- 
<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Host Name</label>
	<input type="text" name="" id="" class="form-control">
</div>

<div class="col-lg-4 col-md-12" style="margin-top:10px;">
	<label>Host Language</label>
	<input type="text" name="" id="" class="form-control">
</div> -->


<div class="col-lg-12 col-md-12 col-sm-12 col-12" style="margin-top:10px;">
	<label>FAQâ€™s</label>
	<textarea cols="80" id="editor1" name="editor1" rows="10"></textarea>
	  <script>
	    CKEDITOR.replace('editor1', {
	      fullPage: true,
	      extraPlugins: 'docprops',
	      // Disable content filtering because if you use full page mode, you probably
	      // want to  freely enter any HTML content in source mode without any limitations.
	      allowedContent: true,
	      height: 320
	    });
	  </script>
</div>
<div id="show_villa_photo">

</div>


<div class="col-lg-12 col-md-12 col-sm-12 col-12 text-center" style="margin-top:20px;position: sticky;right:0px;bottom:0px;">
	<button type="button" name="" id="update_villa" value="Save changes" class="btn btn-warning form-control" style="background-color:#FFC300;">Save changes</button>
</div>

 
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<script data-cfasync="false" src="../../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="assets/bundles/libscripts.bundle.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="assets/bundles/vendorscripts.bundle.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/bootstrap-colorpicker/js/bootstrap-colorpicker.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/jquery-inputmask/jquery.inputmask.bundle.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/jquery.maskedinput/jquery.maskedinput.min.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/multi-select/js/jquery.multi-select.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/bootstrap-multiselect/bootstrap-multiselect.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../assets/vendor/nouislider/nouislider.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="assets/bundles/mainscripts.bundle.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="assets/js/pages/forms/advanced-form-elements.js" type="b32e292bda07a6c0874b989a-text/javascript"></script>
<script src="../../../../ajax.cloudflare.com/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="b32e292bda07a6c0874b989a-|49" defer=""></script><script defer src="../../../../static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"rayId":"65a6dea5a911de6e","version":"2021.5.2","r":1,"token":"f79813393a9345e8a59bb86abc14d67d","si":10}'></script>
<script src="https://cdn.ckeditor.com/4.16.1/standard-all/ckeditor.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDCA8TkShdYJDMaOjbIYyabFUMY3QzNWvQ&libraries=places&callback=initAutocomplete"
        async defer></script> 

<!-- <script>

function initMap() {
  const myLatlng = { lat: 19.12151266185159, lng:74.77880144001962 };
  
  const map = new google.maps.Map(document.getElementById("map"), {
    zoom: 4,
    center: myLatlng,
  });
  // Create the initial InfoWindow.
  let infoWindow = new google.maps.InfoWindow({
    content: "Click the map to get Lat/Lng!",
    position: myLatlng,
  });
  
  infoWindow.setContent(
      JSON.stringify({ lat: 19.12151266185159, lng:74.77880144001962 }, null, 2)
    );
  infoWindow.open(map);
  // Configure the click listener.
  map.addListener("click", (mapsMouseEvent) => {
    // Close the current InfoWindow.
    infoWindow.close();
    // Create a new InfoWindow.
    infoWindow = new google.maps.InfoWindow({
      position: mapsMouseEvent.latLng,
	  
    });

    infoWindow.setContent(
      JSON.stringify(mapsMouseEvent.latLng.toJSON(), null, 2)
    );
    infoWindow.open(map);
	var lat = $(".gm-style-iw-d").closest('div').html()
	console.log(JSON.stringify(mapsMouseEvent.latLng.toJSON(), null, 2))

	
  });
}
// initMap()

</script> -->
<script type="text/javascript">
	var placeSearch, autocomplete;
var componentForm = {
 street_number: 'short_name',
 route: 'long_name',
 locality: 'long_name',
 administrative_area_level_2:"long_name",
 administrative_area_level_1: 'long_name',
 administrative_area_level_11: 'short_name',
 country: 'long_name',
 postal_code: 'short_name'
};

function initAutocomplete() {

 if(document.getElementById('street_address')){
	autocomplete = new google.maps.places.Autocomplete(
(document.getElementById('street_address')),
{types: []});
autocomplete.addListener('place_changed', fillInAddress);   
}
 
}

  function fillInAddress() {
	 var place = autocomplete.getPlace();
	 console.log(place.url);
	 var lat = place.geometry.location.lat();
	 var lng = place.geometry.location.lng();
	 $('#street_address').val("");
	 $('#city').val("");
	 $('#state').val("");
	 $('#country').val("");
	 $('#zip').val("");
	 $('#latitude').val("");
	 $('#longitude').val("");
	 $('#place_id').val("");
	 $('#place_url').val("");
	 

	 $('#latitude').val(lat);
	 $('#longitude').val(lng);
	 $('#place_id').val(place.place_id);
	 $('#place_url').val(place.url);
	 console.log(place.address_components);
	 for (var i = 0; i < place.address_components.length; i++) {
	 var addressType = place.address_components[i].types[0];
	 var val = place.address_components[i][componentForm[addressType]];
	 $('#street_address').val(place.address_components[0][componentForm['street_number']]+" "+place.address_components[1][componentForm['route']]);
	 if(addressType=="administrative_area_level_2")
	 $('#city').val(val);
	 if(addressType=="country")
	 $('#country').val(val);
	 if(addressType=="administrative_area_level_1"){
		 $('#state').val(val);
		 $('#statecode').val(place.address_components[i][componentForm['administrative_area_level_11']]);
	 }
	 if(addressType=="postal_code"){
	 $('#zip').val(val);
	
	 }
	 }
}
 function geolocate() {
// alert('here');
	 if (navigator.geolocation) {
	 navigator.geolocation.getCurrentPosition(function(position) {
	 var geolocation = {
	 lat: position.coords.latitude,
	 lng: position.coords.longitude
	 };
	 var circle = new google.maps.Circle({
	 center: geolocation,
	 radius: position.coords.accuracy
	 });
	 autocomplete.setBounds(circle.getBounds());
	 });
	 }
}
 </script>
 
<script src="/js/info/edit_villa.js"></script>
<script>
    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
            }
        }
    };
    var id = getUrlParameter('id');
    $(function () {
        editVilla.base_url = "<%=baseURL%>";
        editVilla.id = id;
        editVilla.init();

    });
</script>

<script>
	$("#add_extra_amenities").on('click',function(){
		
		$("#amenitis_input").attr("hidden",false);
	})
	$("#append_amenities").on('click',function() {
		
		let amenity = $("#amenitis_input_show").val();
		if(amenity.trim()!==""){

			let value = `<option value="${amenity}">${amenity}</option>`
	console.log(value)
			$("#multiselect2").append(value)
			$('.multiselect').multiselect('destroy');
			$('.multiselect').multiselect();
			$("#amenitis_input_show").val('');
			alert(`You have added ${amenity} please check select amenities`)
		}
		else {
			alert("Please Enter new Amenities")
		}
	})
</script>